%%
%% BNF grammars.
%%

\definecolor{ebnf@keyword}{rgb}{0.2,0.2,0.8}
\definecolor{ebnf@comment}{rgb}{0.8,0.5,0}
\definecolor{ebnf@string}{rgb}{0.0,0.5,0.0}
\providecommand{\textcmt}[1]{{\color{ebnf@comment}\ttfamily{}#1}}
\providecommand{\textkwd}[1]{{\color{ebnf@keyword}\ttfamily{}#1}}
\providecommand{\textstr}[1]{{\color{ebnf@string}\ttfamily{}#1}}

\ifx\ifHtml\undefined
\newcommand{\ebnf@eq}{%
  \textkwd{\raisebox{+.15ex}{:\kern-0.27em:}\kern-0.1em=}%
}
\newcommand{\ebnf@exp}[1]{%
  \textkwd{${}^{#1}$}%
}
\newcommand{\ebnf@star}{%
  \ebnf@exp{\star}%
}
\else
\newcommand{\ebnf@eq}{%
  \textkwd{::=}%
}
\newcommand{\ebnf@exp}[1]{%
  \textkwd{$#1$}%
}
\newcommand{\ebnf@star}{%
  \ebnf@exp{*}%
}
\fi

\newcommand{\ebnf@pipe}{%
  \textkwd{$\mid$}%
}

%% Not using otherkeywords for "(" and ")" and the like because it
%% also applies inside the strings.
\lstdefinelanguage{bnf}
  {morestring=[b]",
   morestring=[b]',
   literate=*%
     {<}{$\langle$}1
     {>}{$\rangle$}1
     {(}{{\textkwd{$($}}}1
     {)}{{\textkwd{$)$}}}1
     {::=}{{\ebnf@eq}}1
     {|}{{\ebnf@pipe}}1
     {*}{{\ebnf@star}}1
     {+}{{\ebnf@exp{+}}}1
     {?}{{\ebnf@exp{?}}}1,
   morecomment=[l]\#
  }[strings,comments,keywords]

%% Local Variables:
%% mode: LaTeX
%% End:
